<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hufflepuff Dashboard</title>
  <!-- Google font: Pangolin -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link 
    href="https://fonts.googleapis.com/css2?family=Pangolin&display=swap" 
    rel="stylesheet"
  >
  <style>
    /* ========= Reset & Global ========= */
    * {
      margin: 0; 
      padding: 0; 
      box-sizing: border-box;
    }
    body {
      display: flex;
      min-height: 100vh;
      font-family: 'Pangolin', cursive; /* 使用Pangolin字体 */
      font-size: 18px;
      line-height: 1.6;
      background: #f6f2e7;  /* 柔和米黄，呼应Hufflepuff暖色 */
      color: #4d3b2f;       /* 深棕，易阅读 */
    }
    a {
      text-decoration: none;
      color: inherit;
      transition: color 0.3s;
    }
    a:hover {
      color: #b38b14; /*hover 时加点金色调 */
    }

    /* ========= Left Sidebar ========= */
    .sidebar {
      width: 220px;
      background: #3d3c2e; /* 深色偏棕黑，接近Hufflepuff的“soil” */
      padding: 2rem 1rem;
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
      display: flex;
      flex-direction: column;
    }
    .sidebar .title {
      font-size: 2rem;
      margin-bottom: 2rem;
      color: #fce6c9;
      text-align: center;
    }
    .nav-links {
      list-style: none;
      font-size: 1.25rem;
    }
    .nav-links li {
      margin-bottom: 1.2rem;
    }
    .nav-links li a {
      color: #fce6c9;
      font-weight: bold;
    }

    /* ========= Main Content ========= */
    .main-content {
      margin-left: 220px; /* 侧边栏预留 */
      flex: 1;
      padding: 2rem;
    }
    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    .header-title {
      font-size: 2rem;
      color: #b38b14; /* 金黄 */
    }

    /* ========= BoomBoom's panel ========= */
    .boom-panel {
      background: #fff8e1; /* 浅黄色底 */
      border: 2px dashed #b38b14; 
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .boom-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background-color: #fff3c1;
      overflow: hidden;
      flex-shrink: 0;
    }
    .boom-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .boom-text {
      flex: 1;
    }
    .boom-text h2 {
      font-size: 1.6rem;
      color: #8c6e0c;
      margin-bottom: 0.5rem;
    }
    .typed-line {
      color: #6b4b0c;
      font-size: 1rem;
      white-space: pre-wrap;
    }

    /* ========= Dashboard Grid ========= */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr; /* 两列 */
      gap: 1.5rem;
    }
    /* 让每个“模块”有类似卡片背景 */
    .card {
      background: #fffef6;
      border: 2px dashed #d0bb8c;
      border-radius: 10px;
      padding: 1rem;
      position: relative;
      min-height: 200px;
    }
    .card h2 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
      color: #5c4b12;
    }
    .card p {
      margin-bottom: 0.5rem;
    }

    /* ========= Calendar (module) ========= */
    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .calendar-nav button {
      background: #8b6d0c;
      color: #fff;
      border: none;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      cursor: pointer;
    }
    .calendar-table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
    }
    .calendar-table th,
    .calendar-table td {
      border: 1px solid #e0d7b8;
      width: 14.28%;
      height: 60px;
      position: relative;
      vertical-align: middle;
      font-weight: 500;
      color: #4d3b2f;
    }
    .calendar-table td.today {
      color: #f6c634; /* 当天数字标黄色 */
      font-weight: bold;
    }
    .calendar-table td.completed-day {
      background: #fff4c2; /* 金黄色底 */
    }

    /* ========= ToDo Preview (module) ========= */
    .todo-list ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .todo-list li {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .todo-list input[type="checkbox"] {
      margin-right: 0.5rem;
      transform: scale(1.3);
    }
    .todo-completed {
      text-decoration: line-through;
      color: #999;
    }
    .todo-title {
      cursor: pointer;
      color: #b38b14;
      text-decoration: underline;
      margin-bottom: 0.5rem;
      display: inline-block;
    }

    /* ========= Mood & Wish Form (module) ========= */
    .mood-form input[type="text"] {
      display: block;
      width: 100%;
      margin-bottom: 0.5rem;
      padding: 0.4rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .mood-form button {
      background: #8b6d0c;
      color: #fff;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    /* ========= Responsive ========= */
    @media(max-width: 768px) {
      .sidebar {
        width: 180px;
      }
      .main-content {
        margin-left: 180px;
      }
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      .boom-panel {
        flex-direction: column;
        align-items: flex-start;
      }
    }

  </style>
</head>
<body>

  <!-- ======== Sidebar ======== -->
  <aside class="sidebar">
    <div class="title">Wizard Navigation</div>
    <ul class="nav-links">
      <li><a href="#">Dashboard</a></li>
      <li><a href="#">Badge Room</a></li>
      <li><a href="#">To Do List</a></li>
      <li><a href="#">Wish & Mood</a></li>
      <li><a href="#">Destiny Room</a></li>
      <li><a href="#">Owl Tower</a></li>
    </ul>
  </aside>

  <!-- ======== Main Content ======== -->
  <main class="main-content">
    <!-- Header Row -->
    <div class="header-row">
      <h1 class="header-title">Dashboard</h1>
    </div>

    <!-- BoomBoom Panel (Avatar + typed text) -->
    <div class="boom-panel">
      <div class="boom-avatar">
        <!-- 替换为你的猫头鹰图片，比如 owl-hi.png -->
        <img src="assets/images/owl-hi.png" alt="Professor Boom Boom" />
      </div>
      <div class="boom-text">
        <h2>Welcome, fluffy little Puffle!</h2>
        <p id="todayInfo" style="font-size:1rem; margin-bottom:0.5rem;"></p>
        <div class="typed-line" id="boomBoomLine"></div>
      </div>
    </div>

    <!-- Dashboard Grid: Calendar, ToDo, Rewards, etc. -->
    <div class="dashboard-grid">
      <!-- Left Column Top: Calendar -->
      <div class="card" id="calendarCard">
        <div class="calendar-nav">
          <button id="prevMonthBtn">&lt;</button>
          <span id="calendarTitle" style="font-weight:bold;"></span>
          <button id="nextMonthBtn">&gt;</button>
        </div>
        <table class="calendar-table">
          <thead>
            <tr>
              <th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th>
              <th>Thu</th><th>Fri</th><th>Sat</th>
            </tr>
          </thead>
          <tbody id="calendarBody"><!-- JS生成 --></tbody>
        </table>
      </div>

      <!-- Right Column Top: ToDo List Preview -->
      <div class="card">
        <h2><span class="todo-title" onclick="location.href='#';">To Do List</span></h2>
        <div class="todo-list" id="todoPreview">
          <!-- JS填充任务 -->
        </div>
      </div>

      <!-- Left Column Bottom: Badges & Shards -->
      <div class="card">
        <h2>Progress & Rewards</h2>
        <p>Badges earned: <span style="color:#b38b14;font-weight:bold" id="badgeCount">5</span></p>
        <p>Shards collected: <span style="color:#b38b14;font-weight:bold" id="shardCount">12</span></p>
        <p>Complete 2 more fun mini-tasks to unlock a golden card draw!</p>
      </div>

      <!-- Right Column Bottom: Quick Mood & Wish -->
      <div class="card">
        <h2>Quick Wish</h2>
        <p>Add a simple wish to the wishing pool. Let your dreams float among firefly sparks!</p>
        <form class="mood-form" id="moodWishForm">
          <input type="text" id="moodInput" placeholder="What's your mood today?" />
          <input type="text" id="wishInput" placeholder="Any fun wish in mind?" />
          <button type="submit">Cast Wish</button>
        </form>
      </div>
    </div>
  </main>

  <script>
    // ========= 0. Date Info =========
    const todayInfo = document.getElementById('todayInfo');
    const now = new Date();
    const dateOptions = { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' };
    todayInfo.textContent = "Today is " + now.toLocaleDateString('en-US', dateOptions);

    // ========= 1. BoomBoom's random lines (50 total) =========
    const boomBoomLines = [
      "Toot toot! Good morning, my sparkly friend! Did you brew your coffee with pixie dust today?",
      "Oops, watch out! I just sneezed confetti. That means today’s your lucky day!",
      "Greetings, oh marvelous mortal! The chocolate frogs salute you.",
      "Your socks may not match, but your heart sure does shine!",
      "Poof! I see a bright future with a flying teacup in it for you.",
      "A silly wand wave never hurt anyone—except that one time with the library books. Let’s forget that!",
      "Tick-tock, wizard clock. Time to dance with your broom, or is it mop day?",
      "Hey, keep that chin up, or the potion will bubble right into your nose!",
      "Puff up your feathers and strut around! Confidence is half the magic.",
      "A pinch of laughter plus a dash of wonder equals your next big idea!",
      "Remember: It's impossible to be grumpy around a happy owl. So cheer up, or I’ll hoot!",
      "If a giant toad offers you tea, politely decline. Trust me on this.",
      "Rainbow sprinkles for your cereal? Absolutely yes!",
      "One tiny giggle can chase away a big storm cloud!",
      "Hold onto your quill! Great adventures start with scribbles and doodles.",
      "Who needs normalcy when you can have magical chaos in style?",
      "Mind if I pop this bubble? It’s floating right by your ear, so watch out!",
      "Time for a quick victory dance—no reason needed, just celebrating you!",
      "Did you remember to feed your invisible cat today? It’s meowing behind you right now!",
      "Sparkle like a star, dear apprentice. The night sky is your runway!",
      "Hoooo... Did I just see a dancing cupcake behind you? Must be Tuesday!",
      "Flying lessons at dawn: Bring your best broom and a rubber duck just in case!",
      "When in doubt, toss some glitter around—it's an instant party!",
      "Poke your wand at the sky and say 'Yes, Universe, I am ready!'",
      "Tonight’s forecast: 80% chance of giggles, 20% chance of random fireworks!",
      "Your smile is the best potion I’ve ever seen—bottling it might be dangerous though!",
      "Careful, I’m about to do a silly magical jig. No cameras, please!",
      "Oh, I’m wise and all, but sometimes I forget where I put my wizard hat!",
      "Bibbidi-bobbidi-woo! Did that help? Probably not, but hey, it sounded fun!",
      "Don't fuss with your hair; you’re already a masterpiece of messy magic!",
      "If you see a giant cookie wandering around, let me know. I’m hungry!",
      "Caw-caw! Oops, wrong bird. Let’s pretend that didn’t happen!",
      "Nothing is more powerful than a curious mind... except maybe a dragon with a cold!",
      "Be bold, be bizarre, be the best banana in the fruit basket!",
      "Wander through your day as if it’s a treasure hunt—X marks the snack spot!",
      "A riddle a day keeps the trolls away. Unless they want your leftover pizza!",
      "Tell your worries to hush. There’s no room for gloom in a wizard’s broom closet!",
      "Oops, I might have turned your pen into a carrot. Sorry ’bout that!",
      "Poof! You’re unstoppable. Now go forth and wiggle your toes in victory!",
      "An owl never forgets a friend, or a midnight snack. Speaking of which...",
      "Every time you blink, a fairy does a cartwheel. Or so I'm told!",
      "Laugh lines on your face? Those are the real magic runes!",
      "I found a wand under your pillow—who's been conjuring midnight milkshakes?",
      "No matter how busy you are, there's always time for a goofy grin!",
      "Never mind mistakes—call them 'funky spells' and carry on!",
      "Your magical aura is shining so bright, I'm going to need tiny owl sunglasses!",
      "If life gives you lemons, enchant them to float around and amuse you!",
      "I’m not lost, I’m just exploring every corner of your day with a flourish!",
      "Party trick idea: Juggle stardust while humming your favorite tune!",
      "Adventures are like potions: you never know what's brewing until it pops!"
    ];

    // 随机一句
    const typedLineEl = document.getElementById('boomBoomLine');
    const line = boomBoomLines[Math.floor(Math.random() * boomBoomLines.length)];

    // ========= 2. Typed effect =========
    let i = 0;
    const speed = 35; 
    function typeWriter() {
      if (i < line.length) {
        typedLineEl.textContent += line.charAt(i);
        i++;
        setTimeout(typeWriter, speed);
      }
    }
    typeWriter();

    // ========= 3. Calendar with < > to navigate months =========
    const calendarBody = document.getElementById('calendarBody');
    const calendarTitle = document.getElementById('calendarTitle');
    let currentYear = now.getFullYear();
    let currentMonth = now.getMonth(); // 0 ~ 11

    function renderCalendar(year, month) {
      // 清空tbody
      calendarBody.innerHTML = '';

      // 标题： Month Year
      const monthNames = ["January","February","March","April","May","June",
                          "July","August","September","October","November","December"];
      calendarTitle.textContent = `${monthNames[month]} ${year}`;

      // 当月1号是周几
      const firstDay = new Date(year, month, 1).getDay();
      // 当月天数
      const daysInMonth = new Date(year, month+1, 0).getDate();

      let dateNum = 1;
      for (let row = 0; row < 6; row++) {
        let rowHtml = '<tr>';
        for (let col = 0; col < 7; col++) {
          if ((row === 0 && col < firstDay) || (dateNum > daysInMonth)) {
            rowHtml += '<td></td>'; // 空单元
          } else {
            // 判断是否是今天
            let classes = '';
            if (year === now.getFullYear() && month === now.getMonth() && dateNum === now.getDate()) {
              classes += ' today';
            }
            // 任务全部完成示例：假设每月 10号
            if (dateNum === 10) {
              classes += ' completed-day';
            }
            rowHtml += `<td class="${classes}">${dateNum}</td>`;
            dateNum++;
          }
        }
        rowHtml += '</tr>';
        calendarBody.innerHTML += rowHtml;
        if (dateNum > daysInMonth) break;
      }
    }

    // 初始渲染
    renderCalendar(currentYear, currentMonth);

    // 前一个月
    document.getElementById('prevMonthBtn').addEventListener('click', ()=>{
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar(currentYear, currentMonth);
    });
    // 后一个月
    document.getElementById('nextMonthBtn').addEventListener('click', ()=>{
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      renderCalendar(currentYear, currentMonth);
    });

    // ========= 4. ToDo List Quick Preview =========
    const todoPreviewEl = document.getElementById('todoPreview');
    const sampleTasks = [
      { id: 1, text: "Water the baby mandrakes", done: false },
      { id: 2, text: "Collect 3 shining mushrooms", done: true },
      { id: 3, text: "Practice broom flying for 15 min", done: false },
    ];

    function renderTodoList() {
      let html = '<ul>';
      sampleTasks.forEach(task => {
        html += `
          <li>
            <input type="checkbox" data-id="${task.id}" ${task.done ? 'checked' : ''}>
            <span class="${task.done ? 'todo-completed' : ''}">${task.text}</span>
          </li>`;
      });
      html += '</ul>';
      todoPreviewEl.innerHTML = html;
    }
    renderTodoList();

    // Checkbox toggle
    todoPreviewEl.addEventListener('change', e => {
      if(e.target.matches('input[type="checkbox"]')) {
        const id = parseInt(e.target.dataset.id);
        const task = sampleTasks.find(t => t.id === id);
        if(task) {
          task.done = e.target.checked;
          renderTodoList();
        }
      }
    });

    // ========= 5. Quick Mood & Wish Form =========
    const moodWishForm = document.getElementById('moodWishForm');
    moodWishForm.addEventListener('submit', e => {
      e.preventDefault();
      const moodInput = document.getElementById('moodInput');
      const wishInput = document.getElementById('wishInput');
      if (moodInput.value.trim() || wishInput.value.trim()) {
        alert(`Saved!\nMood: ${moodInput.value}\nWish: ${wishInput.value}`);
        // 可自行存到后端或 localStorage
        moodInput.value = '';
        wishInput.value = '';
      }
    });
  </script>
</body>
</html>
